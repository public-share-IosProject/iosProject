(function(){if(window.WebViewJavascriptBridge){return}var c;var j=[];var r=[];var h={};var e="yy";var a="__QUEUE_MESSAGE__/";var d={};var m=1;function s(u){c=u.createElement("iframe");c.style.display="none";u.documentElement.appendChild(c)}function q(w){if(b._messageHandler){throw new Error("WebViewJavascriptBridge.init called twice")}b._messageHandler=w;var u=r;r=null;for(var v=0;v<u.length;v++){l(u[v])}}function i(v,u){o({data:v},u)}function g(u,v){h[u]=v}function f(u,w,v){o({handlerName:u,data:w},v)}function o(v,u){if(u){var w="cb_"+(m++)+"_"+new Date().getTime();d[w]=u;v.callbackId=w}j.push(v);c.src=e+"://"+a}function k(){var u=JSON.stringify(j);j=[];c.src=e+"://return/_fetchQueue/"+encodeURIComponent(u)}function l(u){setTimeout(function(){var y=JSON.parse(u);var x;if(y.responseId){x=d[y.responseId];if(!x){return}x(y.responseData);delete d[y.responseId]}else{if(y.callbackId){var z=y.callbackId;x=function(A){o({responseId:z,responseData:A})}}var w=b._messageHandler;if(y.handlerName){w=h[y.handlerName]}try{w(y.data,x)}catch(v){if(typeof console!="undefined"){console.log("WebViewJavascriptBridge: WARNING: javascript handler threw.",y,v)}}}})}function p(u){console.log(u);l(u)}var b=window.WebViewJavascriptBridge={init:q,send:i,registerHandler:g,callHandler:f,_fetchQueue:k,_handleMessageFromNative:p};var t=document;s(t);var n=t.createEvent("Events");n.initEvent("WebViewJavascriptBridgeReady");n.bridge=b;t.dispatchEvent(n)})();